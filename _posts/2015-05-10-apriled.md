---
layout: post
title: Apriled
tags: [Vim,Keyboard,雑感,LaTeX]
---
こんにちは､びしょ～じょです｡気がつけば4月が終わっていました｡そんな感じで4月―厳密には3月中頃から―を振り返ってみました｡あまり昔のことを振り返る習慣がないのでアレなんですが､はい｡長文だし話題も分散しているので､書くなら書くでもう少しこまめに書こうと思いました｡

- - -

## 『殻ノ少女』および『虚ノ少女』をプレイしたぽよ

2014年の百合ゲー界隈を賑わせた(推定)『FLOWERS』でお馴染みのInnocent Grey制作のサイコミステリィADV3連作のうちの2つ｡もちろんボクは『FLOWERS』をプレイして感銘を受けたし､暫く前に『姑獲鳥の夏』(映画)や『魍魎の匣』(*アニメ*)を観て興味をそそられたところこの2作をおすすめされた｡

ライトエロゲーマーと言うのすら憚れるほど殆どエロゲはやったことがないが､以前やったことのあるタイトル数本は正直退屈[^1]だった｡しかしこれは非常に…楽しく…はないが…寝る間も惜しんでやるほど没頭した｡

内容は陰鬱としており､トゥルーエンド含むほぼ全てのエンドはハッピーではないので､全エンドを回収しても悲しい気持ちが募るばかりだった｡つらい気持ちにはなったが内容としては大満足だった｡3部作となっており､第3作目を鋭意製作中とのことで､大きな期待を寄せている｡

- - -
## 奨学金(from JASSO)が断たれる

3月中旬もそろそろ終わる頃､大学支援室よりメールにて奨学金廃止のお知らせをもらった｡

流石に2年生が1年間で16単位しか取れないようでは奨学金も廃止されますよね､はい｡しかし､今となっては返済期間が長いだけの金貸し屋と化したJASSOとしては奨学金廃止は顧客を減らすだけであまりメリットはないのではないか? まぁこんな成績の人間は返済すらしないみたいなアレで､ここで切っておいたほうがいいのかもしれませんが｡

ということで食費と光熱費を奨学金で支払っていたボクはかなり困った｡ちょうどここで先述の『殻ノ少女』のエンディングを全回収しており沈んだ気分になっていたのでかなり精神にダメッジを与えられた｡親に連絡し､交渉の末､とりあえず光熱費分はなんとかするからなんとかしろとのこと｡

- - -
## 求職
さて困った｡メシ代が無い｡まずバイトを探すことにしたが､こちらもだいぶ焦っておりかくなるうえは接客などを考えていた｡で､当時は長髪で肩よりもすこし下までエッジが伸びていた｡どこにバイトの面接を受けるかなど何も考えずに焦りからとりあえず床屋で髪を切った｡万城目ふみさんに憧れて伸ばしていた髪を切ったのはだいぶもったいなく感じられたが､餓死だけはNGという本能がボクの髪を羅生門の老婆に捧げた｡

### 本屋
そのときちょうど『ひまわりさん』を読み終えていたこともあり､駅前の本屋にバイトを申し込んだ｡数日後バイトの面接の日程調節の電話が来た｡その週の土日はどうかと言われが､残念ながらその日はチバラギスタン南部の老夫婦の家に泊まるということで断った｡改めて電話すると言われ､今の今まで本屋から電話はない｡

### よくわからんところ
よくわからんところにWebで応募した｡後日メールが届き

｢学生は雇わない｣

とのこと｡それは書いとけや💢👊

### サ店
もうここまでくると気が気ではなかった｡近所にある喫茶店にバイトの募集の紙が貼ってあったことを思い出し行ってみたが…｡

｢ごめんね､今女の子募集してんだ｣

大爆死 of the end｡

### よくわからんところ2
大学の支援室の近くにはバイトの募集情報が掲載されているボードがある｡そこを見て払いが良さそうなところにアタックしてみた｡

5月の初日､バイト面接当日｡電話料金の支払いが遅れており､回線がつながらずスマピョから電話もGoogleMapも見られない状態になっていた｡ろくすっぽ場所を把握せずにアパートを後にしてしまった上にバイト先がよくわからんところに立地していたので遅刻してしまった｡しかも履歴書を忘れた｡

―死んだ―

わかる

結果はGW中に電話するとのことだった｡面接が終わって帰路につき､スマピョを見てみるとLTEがナイスタイミングで繋がっていた｡もう少し早くしてほしかった｡

アパートに篭ったり篭もらなかったりしてGWを消費していた｡火曜日､起きたら午後の3時｡電話に着信があったのでかけ直してみたところ､よくわからんところからの電話だった｡なんと面接をパスしていた｡ガバガバだ｡ということでメシ代は手に入るということで心に余裕が生まれました｡で､どうやらWindows向けの製品を作っているところのようだ｡ボクLinuxしか使ってないやないかーい(完)｡

- - -
## ThinkPad X1 Carbon 2015
話は戻る｡本屋の面接よりもボクは祖父母の家に行くことを優先した｡(中略)話の運びにより､新しくノートパソコンが手に入ることになった｡Broadwellほしい感が高まっていた｡アパートで使っているディスプレイはFullHDなので､次はWQHDやな(?)という考えもあった｡アキヨドにて色々見ていくとThinkPad X1 Carbon 2015がなかなかよさ気だった｡もとい､選択肢がなかった｡

4月頭に注文し､届いたのは4月終わり頃｡

### スペック
SSDもRAMもオンボードで差し替えや追加が不可能な点はThinkPadとしては最悪だが､他はまぁよかった｡CPUはi5-5200U､RAMは8GB｡NICも802.11ac対応にした｡あとはディスプレイをマルチタッチ非対応のWQHDにしたこと以外はデフォルトの仕様｡交渉の末､14万円ほどになった｡もう少し自分のマネーを積んでCPUを最上位にしたほうがいいとも思ったが､この時点では奨学金が廃止されて来月のメシ代がどこからやってくるのか､本当にやってくるのかさえわからない状況だったので余り考えられなかった｡

### CPU性能
ベンチマークというえるほどのことでもないけど性能差はこんな感じになった｡

https://twitter.com/Nymphium/status/589321539398434818

以前使用していたノートパソコンよりはなかなか速い｡

### 稼働時間
Broadwellは少電力化も売りにしており､オンボードのペラいバッテリーでもだいぶ持ってくれる｡後述する通り最近はLaTeXでノートを取るというマゾいことをしているが､講義中にガンガンコンパイルしても100%充電なら2､3コマくらいでは問題ない｡

### 問題点
- 時々画面が暗転して復帰するのを繰り返す｡はよ修理に出せや自分｡

- `Fn + F4`はサスペンドじゃない!! ファーーーック

- 最近はsystemd-resolvedを使ってるが､キャッチしてほしいAPに近づいても/etc/resolv.confが更新されず､無線がつながらない｡以前まで使っていたThinkPad L430の設定をまるまる引っ張ってNICの名前を変えただけなので動くとは思うんだけどなぁ…｡とりあえず毎回`wpa_supplicant`を手動で再起動するとなんとかなっている｡これはsystemd-resolvedが悪いと思うんですけど(名推理)｡

- また､X1 Carbon 2015はキーボードバックライトとかいう洒落たものがデフォルトで仕込まれているが､そのせいでキートップが薄く､キートップを削るなどして鬼の無刻印化をしようものなら穴が空いてしまうという脆弱性がある｡


- - -
## LaTeXでノートを取る
先述の通り､講義中にマゾプレイを楽しんでいる｡pLaTeX､XeLaTeX､LuaLaTeXのどれにしようかというところで､XeLaTeXは対応しているパッケージが少なく､LuaLaTeXはコンパイルに時間がかかるということでpLaTeXにした｡とはいえオートマトンの状態遷移図などの複雑な図は流石に間に合わないのでその辺は紙のノートに書いている｡

数式はもちろん文字も綺麗で見やすい｡講義中に出てきた複雑な数式を一発で書けるとまた別の楽しみが生まれて最高だにゃ｡でも時々板書よりも組版の美しさに力が行ってしまうので注意が必要だにゃ｡

### vimtex
もちろんpLaTeXもVimを用いて書いており､pLaTeXを記述するのに役立つプラグインにvimtexを使っている｡

{% gh_repo lervag/vimtex %}


以前はVim-LaTeXやLaTeX-Boxを使っていたが､他のプラグインと競合するなどして不要なブラケットが入ったりして逆に使いづらくなっていた｡

neobundleで簡単にインストールが可能｡以下のような設定を追加した｡

```vim
let g:vimtex_view_method = 'general'
let g:vimtex_view_general_viewer ='evince'
let g:vimtex_fold_enabled = 0
let g:vimtex_latexmk_options = '-pdfdvi'

function! s:findInPdf(...)
	let l:str = ''

	if a:0 < 1
		let l:tmp = @x
		normal "xye
		let l:str = @x . ' '
		let @x = l:tmp
	else
		let l:str = a:1 . ' '
	endif

	if strlen(l:str) > 2
		call system("evince -l ". l:str . g:vimtex#data[b:vimtex.id].out() . " >/dev/null 2>&1 &")
	endif
endfunction

if !exists('g:neocomplete#sources#omni#input_patterns')
	let g:neocomplete#sources#omni#input_patterns = {}
endif
let g:neocomplete#sources#omni#input_patterns.tex = '\v\\\a*(ref|cite)\a*([^]]*\])?\{([^}]*,)*[^}]*'

augroup LatexSetup
	autocmd!
	autocmd BufNewFile,BufRead *.tex set ft=tex
	autocmd BufNewFile,Bufread *.tex vmap <silent> <LocalLeader>lf :call <SID>findInPdf(@*)<CR>
	autocmd BufNewFile,Bufread *.tex nmap <silent> <LocalLeader>lf :call <SID>findInPdf()<CR>
augroup END
```

PDFビューワはEvinceを使用している｡`findInPath()`はソースに記述されている文字列をEvinceで開いてる編集中のものから検索してくれる関数｡

またLaTeXに関する補完はneocompleteとガシャコンしてくれて良い感じになっている｡キーバインドも追加されており､数回のタイプで`latexmk SOURCE -pvc`をしてくれて色々ナイス｡残念な点としては､`eqnarray`環境で突然インデントがグシャグシャになることくらいか｡


- - -
## coins LT #10
WORD編集部の後輩な[@KOBA789](https://twitter.com/koba789)君が主催している[coins LT](http://coinslt.org/zero.html)の第0b10回目にてLTをした｡

<a href="/pdf/luakatsu.html">2015 4/15 coins LT #10</a>

内容はまぁ読んでいただくとして､これはLuaLaTeX + Beamerで書いた｡フォント指定が簡単にできるなど便利で表現力が豊かな反面､pLaTeXとの互換性やねじ込まれているLua処理系などにより悲しいこともあった｡luatexja-fontspecにある､`\setmainjfont`コマンドなどで新たにフォントを指定すると文字が一部欠落する､当スライドにちょっと書いてある､`require`のパスなど｡

でもLuaが使えるっていうのはやはり面白いですね｡せっかくLuaLaTeXということで当スライドにもLuaを使った｡`item`環境の記号が'♥'､'◆'､'♤'､'♧'の順番で変わっているところ｡

まずこんなluaファイルを書いた｡

```lua
return function()
	local x = sign_counter % 4
	local str = "\\item[$\\"

	if x == 0 then str = str .. "heartsuit" end
	if x == 1 then str = str .. "diamondsuit" end
	if x == 2 then str = str .. "spadesuit" end
	if x == 3 then str = str .. "clubsuit" end

	str = str .. "$]$
	sign_counter = sign_counter + 1

	tex.print(str)
end
```

texファイルの中ではこんな感じのことを書いた｡

```tex
\directlua{
	sign_counter=0
	signitem = require "signitem"
}
\newcommand{\signitem}{
	\directlua{
		signitem()
	}
}
```

ぶっちゃけこの程度ならLua使わんでもええやろみたいなところではあるが､とにかくLuaを書きたかったということでここは一つ｡

- - -
## TEX Yoda
2月にハードウェアをこっそり注文していた｡

[TEX Yoda](https://www.massdrop.com/buy/tex-yoda)

簡単に言えばトラックポイント付きメカニカルキーボードだ｡まだ開発段階にあり､Massdropという共同購入を募るみたいな感じのサイト(?)のみで買える｡オプションで茶軸にした｡輸送費込で31000円ほどだった｡

2月に注文し､4月終わりに届いた｡

https://twitter.com/Nymphium/status/590373089260621825

マネーを積めば組み立てもしてくれるが､基本的には各自で簡単な半田付けなどをして組み立てることになる｡

(割愛)

右手の親指と机の一部を焼いた後､完成した｡

https://twitter.com/Nymphium/status/590504951173877760

多彩なファンクションキーとの組み合わせに加え､修飾キーの位置はいくつか変更でき､常用している52行の.xmodmap+jp106配列ほどではないが､このキーボードだけでも快適な入力を可能にしている｡

さて肝のトラックポイントなんですが…｡なんかうごかないね…｡

トラックポイント周りはコネクタをガチャコンするだけの簡単なお仕事なので､とりあえず確認してみるもやはりボクが壊したとも思えず販売元にメールを投げた｡壊れてるっぽいのでそのへんの基盤を輸送しますとのこと｡開発中だし､多少はね?


- - -
## SB69
『SHOW BY ROCK』だ｡話は戻り､バイトの面接に遅刻して履歴書を忘れた後に､[@kasu_miko](https://twitter.com/kasu_miko)の家で[@nesouda](https://twitter.com/nesouda)がこしらえた油そばっぽいものを食べた｡タレや麺は[@nesouda](https://twitter.com/nesouda)のバイト先から引っ張ってきたらしくそれぞれは美味いんだが､我々の調理法が甘かったため麺が固まってしまい糸みみずの塊の様相を呈した｡

閑話休題､おっさんどもと積もる話があるわけでもないので､[@kasu_miko](https://twitter.com/kasu_miko)が録画しているアニメーションを3人で観た｡デレマス前半の最終話や､木戸衣吹が出ている時点で"あっ(察し)"な『レーカン』をちょっとだけなど｡ここで録画欄にある『SHOW BY ROCK』に目が止まる｡レトリーというキャラがメガネを掛けていてかわゆいので気にはなっていた｡何故か渋る[@kasu_miko](https://twitter.com/kasu_miko)を説得し2話ほど視聴した｡***いや～～～～('ω')最高✌～～～***

その後､お酒大好き[@T_kam13](https://twitter.com/T_kam13)もスポーンしたので酒を飲んだ｡

帰宅し､翌日さっそくSB69をスマピョにインストーョしプレイするも…レトリーにゃそはNしか手に入らず悲しみを覚えたが､プラズマジカを2段階進化させて得が高まったため､その次の日にはバイト合格の知らせをうけとるのであった｡ ― *fin.*


- - -

最近はWORDのLuaLaTeX用クラスを作っている｡だいぶしんどい｡LinuxCon2015の学生無料枠にもねじ込めたので頑張るぞ～っおー!

[^1]: タイトルのみですらユーザをこれでもかとぶん殴りにきている『ふたなりアイドルでかたま系』に関しては例外
