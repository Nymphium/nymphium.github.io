---
layout: post
title: Lily58による.xmodmapのハードウェア実装
tags: [WORD, 自作キーボード, lily58]
---

こんにちは､びしょ〜じょです｡
これは[WORDIAN Advent Calendar 2018](https://adventar.org/calendars/3536)の2日目の記事です｡

12月2日といえば､翌3日は冴草きいちゃんの誕生日ですね!!!!!!!!!!!
めでたいですね｡
何度でも言うぞ｡

---

さて今回はWORD部員協賛のもと､[Lily58](https://booth.pm/ja/items/1079687)というキーボードを作りました｡

https://twitter.com/Nymphium/status/1063171636998754304

# 材料あつめ
上記のセットに加え､キースイッチとキーキャップを58個(とUSBケーブルとTRSケーブルを)揃える必要があります｡

WORD編集部室には3x3で全色異なるキースイッチのサンプルがあるので､お手元が寂しくなるとつい手を動かしてしまうW部員達には重宝されている｡
カチカチしまくった結果､緑軸が良いな〜と思ったので緑軸にしようとしたものの､ちょうどどこを探しても8000個から仕入れ可能みたいなものしかなかった｡
仕方がないので､[遊舎工房でKilhのロープロ白軸](https://yushakobo.jp/shop/pg1350/)を買った｡
カチカチとクリック感があり､青軸のようにうるさいのでパソコンカタカタオタク演ってる感がでて良いかな〜というのが選定理由だ｡

# 作る
3月の引越しにつき祖父からもらったり実家からパチってきた激古はんだごてを全部捨ててしまったため､部員の{%twid rizaudo%}氏にはんだごてを借り､ついでに編集部室で作業をおこなう｡

[ビルドガイド](https://github.com/kata0510/Lily58/blob/master/doc/buildguide_jp.md)にしたがって作っていく｡

## pro micro事件1
が…

https://twitter.com/Nymphium/status/1064870457642442752

ヘ タ ク ソ[^1]

トーストによるハンダクラックは無事失敗｡
部室にあったポンコツハンダ吸い取り器や､部員のハジョン氏にハンダ吸い取り線を借りるも難航｡
rizaudo氏や部室を常時警備している{%twid akkkix%}氏の協力のもとハンダを吸いまくるも取れる気配がない｡
{%twid NTSC_J%}氏にも部室にあるものよりも使えるハンダ吸い取り器を持ってきてもらい､交代しながらハンダを吸っていく｡

日が変わり､そして―

https://twitter.com/Nymphium/status/1064957919215538177

およそ5時間経過し､pro microを取り出すことに成功した｡
作業員がこの時間で各々バイトをして発生した金で諸々買い直したほうが黒字だし早かったね､という話をした｡
たしかにこの時点で人件費が材料費を上回ってしまっている｡

くぅ〜疲れましたw これにてlily58完成です!
とはいかず…｡

## pro micro事件2
基板に全部くっつけたのでファームウェア書き込んでおわりや!!
というところで片方に全然書き込めない｡
オーブンで焼いたほうは特定のキー列だけ入力を受け付けたり受け付けなかったりする｡

後者の問題はpro microを剥がしたときにランドが1つお亡くなりになったことに起因すると推理し､rizaudo氏がハンダを盛りまくることで導通してくれた｡
謝謝茄子｡

問題は前者である｡
pro microを使う他の自作キーボードを作ってるブログなどを見てみると､なんかpro microを非対称(?)に付ける必要があるっぽいな…???

(***作ってる時には説明なかった***)[pro microを取り付ける部分](https://github.com/kata0510/Lily58/blob/master/doc/buildguide_jp.md#pro-micro%E3%82%92%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B)はたしかになんか書いてありますねぇ!!

恐怖のハンダ吸いが再び始まり―

<center>
[label: yaba]
![やばい](/pictures{{ page.id }}/pinsocket.png "yabai")
図[ref:yaba] ピンヘッダをなんとかしようとするrizaudoとakkkix

</center>

https://twitter.com/Nymphium/status/1065120644726054912

https://twitter.com/Nymphium/status/1065133627883708417

オワッ…

仕方がないのでハードウェア的に問題ない半分を完成させた｡

https://twitter.com/Nymphium/status/1065115902633365504

早速[代打](https://www.amazon.co.jp/gp/product/B01M6WULAO/)を注文し､激戦の翌々日に届き､ネタが割れてしまえば爆速で完成｡

https://twitter.com/Nymphium/status/1065851007630888960

## tips
ロープロファイルだとアクリル板を止めるネジの頭にキーキャップが当たるので､キーキャップをちょっと削る必要がある｡

<center>
[label:kezuri]
![削る](/pictures{{ page.id }}/kezuri.png "削る様子")
図[ref:kezuri] 削ったキーキャップ

</center>

そういえば昔WORDの記事でThinkPadのキートップを無刻印にすべくヤスリで削りまくった記憶がある｡
今回はカッターでゴリゴリ削ってしまっているが､コチラのほうがはるかに作業時間が短い｡

---

ハードウェアの実装は18時間くらいかかってしまった｡
ご協力大変感謝いたします｡

# qmk firmware

[^1]: ビルドガイドがボクの失敗を見たためかどうか､失敗したポイントについて丁寧な解説が加えられている｡みなさんは私の屍を超えて失敗レスに作ることができます｡

